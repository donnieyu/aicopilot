### [Mode A] Quick Start 요청 (자연어 -> 리스트 -> 맵)
# 사용자가 처음 자연어로 프로세스를 요청하는 시나리오입니다.
# 1단계(Outliner)와 2단계(Transformer)가 순차적으로 실행됩니다.
POST http://localhost:8080/api/copilot/start
Content-Type: application/json

{
  "userPrompt": "직원 채용 프로세스를 만들어줘. 지원자가 이력서를 제출하면 HR이 검토하고, 합격하면 면접을 보고, 최종 합격하면 입사 처리를 하는 과정이야. 중간에 불합격하면 통보해야 해."
}

> {%
    client.global.set("modeA_JobId", response.body.jobId);
    client.log("Mode A Job ID saved: " + response.body.jobId);
%}

### [Mode A] 상태 조회 (Polling)
# 위 요청 실행 후 반복해서 상태를 확인하세요.
# 단계 변화: 1단계(리스트 작성) -> 2단계(맵 변환 & 자가수정) -> 완료
GET http://localhost:8080/api/copilot/status/{{modeA_JobId}}

---

### [Mode B] Transformation 요청 (리스트 JSON -> 맵)
# 프론트엔드(Outliner UI)에서 사용자가 직접 단계를 편집한 뒤, '맵 생성' 버튼을 눌렀다고 가정한 시나리오입니다.
# ProcessDefinition JSON을 직접 전송합니다.
POST http://localhost:8080/api/copilot/transform
Content-Type: application/json

{
  "topic": "법인 카드 발급 요청",
  "steps": [
    {
      "stepId": "step_1",
      "name": "발급 신청서 작성",
      "role": "직원",
      "description": "카드 한도 및 사유 입력",
      "type": "ACTION"
    },
    {
      "stepId": "step_2",
      "name": "팀장 승인",
      "role": "팀장",
      "description": "신청 사유 검토 및 승인 여부 결정",
      "type": "DECISION"
    },
    {
      "stepId": "step_3",
      "name": "재무팀 발급 처리",
      "role": "재무팀",
      "description": "카드사 신청 및 수령 등록",
      "type": "ACTION"
    }
  ]
}

> {%
    client.global.set("modeB_JobId", response.body.jobId);
    client.log("Mode B Job ID saved: " + response.body.jobId);
%}

### [Mode B] 상태 조회 (Polling)
# Mode B는 1단계 없이 바로 2단계(Transformation)부터 시작합니다.
GET http://localhost:8080/api/copilot/status/{{modeB_JobId}}

---

### [Phase 3] 실시간 AI 제안 (Suggestion)
# 특정 노드(포커스 노드) 다음 단계에 무엇이 올지, 데이터 바인딩은 어떻게 할지 물어봅니다.
POST http://localhost:8080/api/copilot/suggest
Content-Type: application/json

{
  "focusNodeId": "node_review_resume",
  "currentGraphJson": "{ \"nodes\": [ { \"id\": \"node_review_resume\", \"type\": \"USER_TASK\", \"label\": \"Resume Review\", \"data\": { \"outputVariables\": [\"resume_score\", \"candidate_email\"] } } ] }"
}